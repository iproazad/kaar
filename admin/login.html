<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة كار | تسجيل الدخول</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="admin-page login-page">
    <div class="admin-container">
        <div class="login-form">
            <div class="logo">
                <h1>كار</h1>
                <p>لوحة التحكم</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">اسم المستخدم</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">كلمة المرور</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">تسجيل الدخول</button>
                </div>
                <div class="error-message" id="errorMessage"></div>
            </form>
            <div class="back-link">
                <a href="../index.html"><i class="fas fa-arrow-right"></i> العودة للصفحة الرئيسية</a>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <!-- تهيئة Firebase -->
    <script>
        // تكوين Firebase
        const firebaseConfig = { 
            apiKey: "AIzaSyBeu2_k79cWdO8FteGAqPNnjYDu0QM3JW8", 
            authDomain: "karkar-36376.firebaseapp.com", 
            projectId: "karkar-36376", 
            storageBucket: "karkar-36376.firebasestorage.app", 
            messagingSenderId: "1068465316432", 
            appId: "1:1068465316432:web:88782a9008ed013a676755", 
            measurementId: "G-EJ0PSRF642" 
        };
        
        // تهيئة Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        // تعديل إعدادات Firestore للسماح بالوصول في وضع الاختبار
        db.settings({
            ignoreUndefinedProperties: true,
            cacheSizeBytes: firebase.firestore.CACHE_SIZE_UNLIMITED
        });
        
        // إضافة معالج للأخطاء العامة في Firebase
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                console.log('تم تسجيل الدخول بنجاح:', user.email);
            }
        }, function(error) {
            console.error('خطأ في المصادقة:', error);
        });
        
        console.log('تم تهيئة Firebase وقاعدة البيانات Firestore');
    </script>
    
    <script src="js/login.js"></script>
</body>
</html>